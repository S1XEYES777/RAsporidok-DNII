<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/static/css/style.css" rel="stylesheet">
</head>

<body class="container mt-3">

<a href="/main" class="btn btn-dark mb-3">← Назад</a>

<h3>{{me.name}}</h3>

<div class="progress mb-3">
<div class="progress-bar bg-success" style="width: {{progress}}%">
{{progress}}%
</div>
</div>

<img src="/static/avatars/{{me.avatar}}" class="avatar-large mb-3">

<form method="POST" action="/upload_avatar" enctype="multipart/form-data">
<input type="file" name="avatar" class="form-control mb-2">
<button class="btn btn-primary w-100">Загрузить аватар</button>
</form>

<hr>

<form method="POST">

<input name="text" class="form-control mb-2" placeholder="Задача">

<input type="date" name="date" class="form-control mb-2">

<div class="difficulty-select">

<button type="button" onclick="setDifficulty(1)" class="diff-btn diff1">Легко</button>
<button type="button" onclick="setDifficulty(2)" class="diff-btn diff2">Норм</button>
<button type="button" onclick="setDifficulty(3)" class="diff-btn diff3">Средне</button>
<button type="button" onclick="setDifficulty(4)" class="diff-btn diff4">Сложно</button>
<button type="button" onclick="setDifficulty(5)" class="diff-btn diff5">Очень сложно</button>
<button type="button" onclick="setDifficulty(6)" class="diff-btn diff6">Невозможный</button>

<input type="hidden" name="difficulty" id="difficultyInput" value="1">

</div>


<button class="btn btn-success w-100">Добавить</button>

</form>

<hr>

<h4>Все задачи</h4>

{% for t in tasks %}

<div class="task diff{{t.difficulty}}">

<span>
<b>{{t.text}}</b>
<br>
<small>{{t.date}}</small>
</span>

<span>

{% if t.completed %}
<span>✅</span>
{% else %}
<a href="/complete_task/{{t.id}}" class="btn btn-success btn-sm">
Выполнить
</a>
{% endif %}

<a href="/delete_task/{{t.id}}" class="btn btn-danger btn-sm">
Удалить
</a>

</span>

</div>

{% endfor %}

</body>
</html>
